PROMPT 01 – Login básico en el frontend (solo estado local, sin Supabase aún)

Rol

Eres TRAE, un asistente de programación especializado en proyectos TypeScript + React + Vite. Actúas como operador de código de un proyecto ya existente. Tu responsabilidad es leer cuidadosamente la estructura del proyecto, modificar los archivos necesarios y crear nuevos componentes cuando haga falta, sin romper el build, manteniendo un estilo limpio y coherente con el código existente. Debes dejar todo funcionando y además generar un archivo de documentación en texto plano donde expliques lo que hiciste y los problemas que encontraste durante el proceso.

Contexto del proyecto

El proyecto es un frontend React + TypeScript creado con Vite. El repositorio se llama MODULO-2. Actualmente:

El archivo App.tsx muestra directamente una pantalla tipo POS o calculadora de productos (es el “cuerpo” principal de la app).

No existe todavía una pantalla de login.

A nivel de backend, la base de datos ya está creada manualmente en Supabase (tablas como users, categories, products, sales_header, sales_detail, cash_movements), pero en este primer paso no debes conectarte todavía a Supabase ni usar autenticación real.

El objetivo de este prompt es preparar la estructura del frontend para que exista un flujo de login básico, controlado por estado local en React, que luego se pueda reemplazar fácilmente por autenticación real de Supabase en otro prompt.

El usuario que te está usando es backend, por lo que tú debes hacer todo el trabajo de código de frontend de manera autónoma, clara y ordenada.

Tarea principal

Implementar un flujo de login básico en el frontend, sin integrar aún Supabase Auth, siguiendo este esquema:

Extraer la pantalla actual del POS (el contenido que hoy se renderiza directamente en App.tsx) a un nuevo componente llamado PosScreen, ubicado en la carpeta components.

Crear un nuevo componente de React llamado Login, ubicado también en components, que renderice un formulario de inicio de sesión simple con email y contraseña.

Modificar App.tsx para que:

Gestione un estado de “usuario autenticado” de forma local.

Muestre la pantalla de login cuando el usuario no está autenticado.

Muestre el POS (PosScreen) cuando el usuario está autenticado.

Añada una barra superior simple con un título y un botón de “Cerrar sesión”.

Asegurarte de que el proyecto compile correctamente y que al ejecutarlo con npm run dev se vea primero el login y, al “iniciar sesión”, se muestre el POS.

Generar un archivo .txt de documentación en el repositorio, explicando detalladamente los cambios realizados, las decisiones tomadas y los errores encontrados, junto con su solución.

Qué debes hacer (detallado)

Analizar la estructura actual del proyecto

Inspecciona el contenido de App.tsx para entender qué componente o JSX está actuando como la pantalla principal del POS o calculadora.

Revisa la carpeta components para ver qué componentes ya existen y cómo están siendo usados.

No modifiques todavía index.tsx, vite.config.ts, tsconfig.json ni archivos de configuración del proyecto.

Crear el componente PosScreen

Identifica en App.tsx todo el JSX que corresponde a la pantalla actual del POS (la calculadora con los productos).

Crea un nuevo archivo en la carpeta components llamado PosScreen.tsx.

Mueve la lógica y el JSX de la pantalla del POS desde App.tsx a este nuevo componente PosScreen.

Asegúrate de que el componente PosScreen se exporte como exportación por defecto y que tenga el mismo comportamiento visual y funcional que tenía antes en App.tsx.

Si el POS utiliza hooks, funciones auxiliares o estados que estaban en App.tsx, muévelos correctamente a PosScreen para que el componente siga funcionando de manera independiente.

Verifica que los imports dentro de PosScreen estén corregidos (por ejemplo, rutas relativas a otros componentes, tipos, etc.).

Crear el componente Login

Crea un nuevo archivo en la carpeta components llamado Login.tsx.

Define un componente funcional de React llamado Login.

Este componente debe recibir, a través de props, una función de callback que permita notificar al componente App que el login fue exitoso. Esta función debe recibir al menos el email y la contraseña como parámetros.

El componente Login debe mostrar:

Un título que indique que es una pantalla de “Iniciar sesión”.

Un campo de entrada para el correo electrónico.

Un campo de entrada para la contraseña.

Un botón para enviar el formulario.

La validación puede ser sencilla: basta con verificar que el email y la contraseña no estén vacíos antes de llamar al callback de onLogin.

Si los campos están vacíos, no llames al callback y mantén al usuario en la pantalla de login.

Estiliza el formulario de forma simple pero clara (por ejemplo, centrándolo en la pantalla, con un contenedor de tamaño moderado, bordes redondeados y un botón visible). Puedes usar estilos inline o la misma estrategia de estilos existente en el proyecto, pero no introduzcas nuevas librerías de estilos en este paso.

Gestionar el estado de autenticación en App.tsx

Modifica App.tsx para que:

Importe el componente Login desde components/Login.

Importe el componente PosScreen desde components/PosScreen.

Define en App.tsx un estado de React que represente si el usuario está autenticado o no.

Define otro estado para almacenar el email del usuario autenticado (esto se usará solo para mostrarlo en la interfaz, por ejemplo, en la barra superior).

Implementa una función de manejo de login en App.tsx que:

Reciba el email y la contraseña (provenientes del componente Login).

Compruebe que ambos valores no estén vacíos.

Si son válidos, cambie el estado de autenticación a “autenticado” y guarde el email en el estado.

No realices ninguna llamada a Supabase ni a otras APIs por ahora. Este login es puramente de demostración con estado local.

Implementa una función de logout en App.tsx que:

Restaure el estado de autenticación a “no autenticado”.

Limpie el email del usuario en el estado.

En el JSX de App.tsx:

Si el estado indica que el usuario no está autenticado, renderiza únicamente el componente Login, pasándole el callback de onLogin.

Si el estado indica que el usuario sí está autenticado, renderiza:

Una barra superior (header) con:

Un título tipo “POS Verdulería” o similar.

Un texto pequeño que indique el email de la sesión activa.

Un botón para “Cerrar sesión” que invoque la función de logout.

Debajo de esta barra, el componente PosScreen.

Revisión y validación

Asegúrate de que todas las importaciones en App.tsx, Login.tsx y PosScreen.tsx sean correctas y no haya rutas rotas.

Ejecuta los comandos habituales del proyecto para verificar que todo compila sin errores, por ejemplo:

Instalar dependencias (si todavía no lo están) con npm install.

Ejecutar el servidor de desarrollo (por ejemplo npm run dev) para comprobar que:

Al cargar la app en el navegador, se muestra primero la pantalla de login.

Si el usuario introduce un email y una contraseña válidos (no vacíos) y hace clic en el botón de iniciar sesión, la app cambia a la vista del POS.

El encabezado muestra el email de la sesión y el botón de “Cerrar sesión”.

Al hacer clic en “Cerrar sesión”, se vuelve a la pantalla de login.

Verifica que no haya errores de TypeScript ni de compilación.

Límites explícitos de este prompt

No implementes todavía ninguna integración con Supabase Auth ni lectura de JWT.

No cambies la configuración de Vite, TypeScript ni otros archivos de configuración.

No elimines lógica del POS; solo muévela a PosScreen y asegúrate de que siga funcionando tal como antes.

No implementes lógica de roles ni RLS ni consultas a la base de datos en este prompt. Eso se hará en prompts posteriores.

Cómo debe quedar al final (resultado esperado)

Al terminar este prompt, la aplicación debe comportarse así:

Al cargar la app en el navegador:

Se debe ver una pantalla de login centrada, con campos de correo y contraseña, y un botón de “Entrar” o similar.

Si el usuario intenta iniciar sesión con campos vacíos:

No debe cambiar de pantalla.

Si el usuario ingresa un correo y una contraseña (cualquier valor) y envía el formulario:

La app debe cambiar a la vista principal del POS (la calculadora con productos).

En la parte superior debe verse una barra con:

Un texto con el título de la app.

Un texto indicando el email con el que se inició sesión.

Un botón de “Cerrar sesión”.

Si el usuario hace clic en “Cerrar sesión”:

La app debe volver inmediatamente a la pantalla de login.

El build de la app no debe tener errores de TypeScript ni de compilación.

Este comportamiento será la base para, en prompts posteriores, reemplazar el login simulado por un login real con Supabase Auth.

Documentación que debes generar en un archivo .txt

Al finalizar todas las modificaciones de este prompt, debes crear un archivo de texto en el repositorio (por ejemplo en una carpeta docs, si no existe, créala) con un nombre descriptivo, por ejemplo:

docs/trae_login_front_log.txt

En ese archivo .txt, escribe en texto plano:

Fecha y hora aproximada en la que realizaste los cambios.

Lista de archivos creados y modificados, indicando:

Nombre del archivo.

Qué se agregó, se movió o se refactorizó en cada uno.

Explicación breve del flujo de la aplicación después del cambio:

Cómo funciona ahora el login.

Cómo se muestra el POS cuando el usuario está autenticado.

Cómo funciona el logout.

Descripción de cualquier error, problema o dificultad técnica que encontraste durante el proceso (por ejemplo errores de tipos, imports incorrectos, problemas de compilación).

Explicación de cómo solucionaste cada error o dificultad.

Nota final indicando que este prompt no incluye integración real con Supabase, y que el login sigue siendo un estado local, para dejar claro el punto de partida para el siguiente prompt.